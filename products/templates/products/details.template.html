{% extends 'base.template.html'%}
{% load cloudinary %}
{%load static%}

{%block title%}Show All Products{%endblock%}



{%block content%}

				<div class="row mt-4 mb-2">
					<div class="col-sm-6 media cards-gallery">
                        {% cloudinary product.cover class="img-fluid"%}
					</div>

					<div class="col-sm-6 align-self-center align-items-center">
                        <div class="col-sm-12">
                            <h2 class="h2-ctm-d mt-2">{{product.name}}</h2>
                            <h3 class="h3-ctm-d">{{product.category}}</h3>

                            <div class="col-sm-12 p-0">
                                <h3 class="h3-ctm-d">${{product.price}}</h3>
                            </div>
                            
                            <div class="col-sm-12 p-0 m-0">
                            <h4 class="m-0 h4-ctm-d mt-3 mb-3">{{product.description}}</h4>
                            </div>

                            <div class="col-sm-12 p-0 mb-2">
                            {%for tag in product.tags.all %}
                            <span class="badge badge-pill">{{tag.title}}</span>
                            {%endfor%}
                            </div>

							{% if not request.user.is_authenticated %}
							<a class="btn btn-primary" href="{% url 'add_to_cart' product_id=product.id %}">Add to Cart</a>
							{% endif %}
							{% if request.user.is_authenticated %}
							<a class="btn btn-primary" href="{% url 'add_to_cart' product_id=product.id %}">Add to Cart</a>
                                <a class="btn btn-info" href="{% url 'create_review_route' product_id=product.id %}">Add a Review</a>
							{% endif %}
							{% if request.user.is_superuser %}
							<a class="btn btn-primary" href="{% url 'update_product_route' product_id=product.id %}">Edit</a>
                                <a class="btn btn-danger" href="{% url 'delete_product_route' product_id=product.id %}">Delete</a>
							{% endif %}

                            <!--<div class="col-sm-12 m-0 pl-0 pb-3">
                                <a class="btn btn-primary" href="{% url 'update_product_route' product_id=product.id %}">Edit</a>
                                <a class="btn btn-danger" href="{% url 'delete_product_route' product_id=product.id %}">Delete</a>
                                <a class="btn btn-primary" href="{% url 'add_to_cart' product_id=product.id %}">Add to Cart</a>
                                <a class="btn btn-info" href="{% url 'create_review_route' product_id=product.id %}">Add a Review</a>
                            </div>-->
					    </div>
				    </div>
				</div>
                <div>
                
                {%for review in product.review_set.all %}
                <h2 class="mt-2">Reviews</h2>
                    <div class="card">
                        <div class="card-body">
                            <div class="card-title">
                            <h3>{{review.title}}</h3>
                            </div>

                            <div>
                            <h3>{{review.content}}</h3>
                            </div>

                            <p>By {{review.user.username}}</p>

                            <a class="btn btn-info" href="{% url 'update_review_route' review_id=review.id %}">Edit Review</a>
                            <a class="btn btn-danger" href="{% url 'delete_review_route' review_id=review.id %}">Delete Review</a>
                        </div>
                    </div>
                {%endfor%}

                </div>


{%endblock%}